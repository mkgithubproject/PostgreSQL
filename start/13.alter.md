Got it 👍 You want a **full deep dive into `ALTER` in PostgreSQL**.

The `ALTER` command is used to **change an existing database object** (like a table, column, constraint, etc.) without dropping and recreating it.

---

# 🔹 `ALTER TABLE` – Most Common Use

```sql
ALTER TABLE table_name action;
```

---

# 1. **Rename a Table**

```sql
ALTER TABLE employees RENAME TO staff;
```

---

# 2. **Add a Column**

```sql
ALTER TABLE employees ADD COLUMN salary NUMERIC;
```

✅ Adds a new column with `NULL` values for existing rows.

---

# 3. **Drop a Column**

```sql
ALTER TABLE employees DROP COLUMN salary;
```

⚠️ Data in that column will be lost.

---

# 4. **Rename a Column**

```sql
ALTER TABLE employees RENAME COLUMN emp_name TO full_name;
```

---

# 5. **Change Data Type of a Column**

```sql
ALTER TABLE employees ALTER COLUMN salary TYPE BIGINT;
```

---

# 6. **Set or Drop DEFAULT Value**

```sql
ALTER TABLE employees ALTER COLUMN salary SET DEFAULT 30000;
ALTER TABLE employees ALTER COLUMN salary DROP DEFAULT;
```

---

# 7. **Set or Drop NOT NULL**

```sql
ALTER TABLE employees ALTER COLUMN emp_name SET NOT NULL;
ALTER TABLE employees ALTER COLUMN emp_name DROP NOT NULL;
```

---

# 8. **Add a Constraint**

### 🔹 Primary Key

```sql
ALTER TABLE employees ADD CONSTRAINT emp_pk PRIMARY KEY (id);
```

### 🔹 Unique

```sql
ALTER TABLE employees ADD CONSTRAINT unique_email UNIQUE (email);
```

### 🔹 Foreign Key

```sql
ALTER TABLE employees ADD CONSTRAINT fk_dept FOREIGN KEY (dept_id)
REFERENCES departments(dept_id);
```

### 🔹 Check

```sql
ALTER TABLE employees ADD CONSTRAINT check_salary CHECK (salary > 0);
```

---

# 9. **Drop a Constraint**

```sql
ALTER TABLE employees DROP CONSTRAINT unique_email;
```

---

# 10. **Rename a Constraint**

```sql
ALTER TABLE employees RENAME CONSTRAINT check_salary TO salary_check;
```

---

# 11. **Change Column Position (Only Logical in SELECT, not real)**

PostgreSQL does **not support changing physical column order**.
But you can **recreate table or use views** to reorder columns.

---

# 12. **Change Table Owner**

```sql
ALTER TABLE employees OWNER TO new_owner;
```

---

# 🔹 Example: Full Flow

```sql
CREATE TABLE employees (
    id SERIAL,
    emp_name TEXT,
    dept_id INT,
    email TEXT
);

-- Add salary column
ALTER TABLE employees ADD COLUMN salary NUMERIC;

-- Make emp_name mandatory
ALTER TABLE employees ALTER COLUMN emp_name SET NOT NULL;

-- Add default salary
ALTER TABLE employees ALTER COLUMN salary SET DEFAULT 20000;

-- Add unique email
ALTER TABLE employees ADD CONSTRAINT unique_email UNIQUE (email);

-- Rename table
ALTER TABLE employees RENAME TO staff;

-- Drop column
ALTER TABLE staff DROP COLUMN dept_id;
```

---

# ✅ Summary

* `ALTER TABLE` lets you modify tables without recreating them.
* You can **rename, add/drop columns, change data types, add/drop constraints, set defaults, rename constraints, change ownership**.
* **Good practice**: use `ALTER` instead of dropping/recreating tables → prevents data loss.

---

👉 Do you also want me to cover **`ALTER DATABASE` and `ALTER USER`** commands (not just tables), or should I keep the focus only on tables?
